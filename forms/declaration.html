<script>
$(document).ready(function(e) {
    	$.ajax({
		mimeType: 'text/html; charset=utf-8', // ! Need set mimeType only when run from local file
		url: 'json/check_declaration.php',
		type: 'POST',
		success: function(data) {
			retObj = JSON.parse(JSON.stringify(data));
		},
			error: function (jqXHR, textStatus, errorThrown) {
			alert(jqXHR+ textStatus+errorThrown);
		},
		dataType: "json",
		async: false
		});
		if(retObj=="TRUE")
		{$('#checkboxdiv').hide();
		$('#div_message').html("<h2>You have already checked the declaraiton.</h2>");
		$('#div_message').show();
		$('.box-footer').hide();
		}

		if(retObj=="NOTELIGIBLE")
		{$('#checkboxdiv').hide();
		$('#div_message').html("<h2>You have not yet completed all your employee entry.</h2>");
		$('#div_message').show();
		$('.box-footer').hide();}
	
	$('#Save').click(function(e) {
		
		if($('#dc_check').prop('checked'))
		{
    	$.ajax({
		mimeType: 'text/html; charset=utf-8', // ! Need set mimeType only when run from local file
		url: 'php/mark_declaration.php',
		type: 'POST',
		success: function(data) {
			$('#checkboxdiv').html("<h2>Declaration Successfully Checked.</h2>");
					$('.box-footer').hide();
		},
			error: function (jqXHR, textStatus, errorThrown) {
			alert(jqXHR+ textStatus+errorThrown);
		},
		dataType: "html",
		async: false
		});
		}
		else
		{
			alert("Please Check the CheckBox");	
		}
    });
});
</script>
<div class="row">

	<div class="col-sm-12">
    	<div class="box box-info">
        	<div class="box-header with-border">
            	<h3 class="box-title">DECLARATION FORM</h3>              
         	</div><!-- /.box-header -->
			<div class="box-body">
            
           	<div id="div_message" class="callout callout-danger" hidden="">	
            											
    		</div>
            <div class="row" id="checkboxdiv">
                <div class="col-sm-12">
                  <div class="input-group">
                    <span class="input-group-addon">
                      <input type="checkbox" id="dc_check">
                    </span>
                    <textarea class="form-control" disabled="disabled" rows="3">Certified that the detail information furnished earlier in PP-1 format and also PP-2 format are verified with office record and genuine. Names of all officials have been included in the PP-2 format and no information has been concealed.</textarea>
                  </div>
                </div>
         	</div>
        	</div>
            <div class="box-footer text-center">
    	<button type="button" class="btn btn-success btn-lg"  id="Save" ><span><i class="fa fa-save"></i></span>&nbsp;&nbsp;Save</button>
        </div>	
     	</div>
	</div>
</div>
            
            